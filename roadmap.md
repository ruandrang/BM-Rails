# 농구 클럽 매니저 개발 로드맵

## 📊 현재 구현 상태 요약

**핵심 기능 (완료)**
- ✅ 회원가입/로그인 (세션 기반)
- ✅ 클럽 생성 및 관리 (아이콘 12종)
- ✅ 멤버 관리 (CRUD, 드래그앤드롭 순서변경, CSV 입출력)
- ✅ 팀 밸런싱 (2팀/3팀, 포지션 균등 + 승률 기반)
- ✅ 경기 기록 및 관리
- ✅ 통계 대시보드 (출전수, 승률 등)
- ✅ JSON 백업/복구
- ✅ 공유용 경기 결과 화면
- ✅ 관리자 대시보드

---

## 🎯 추가하면 좋을 기능 (우선순위별)

### Priority 0 (핵심 신규 기능) 🔥

#### 1. 라이브 점수판 시스템 ⭐⭐⭐
**가장 중요하고 차별화된 기능**

##### 1-1. 듀얼 스크린 구조
- **컨트롤 화면** (PC/태블릿): 점수 입력, 타이머 조작
- **디스플레이 화면** (외부 모니터/TV): 실시간 점수판 표시
- 웹소켓(ActionCable)으로 실시간 동기화

##### 1-2. 농구 경기 필수 기능
- **타이머**: 24초 샷클락, 14초 리셋, 일시정지/재개
- **점수 입력**: 1점/2점/3점 버튼 (팀별)
- **음성 안내**: "24초 위반", "점수 업데이트" 등 TTS
- **부저 사운드**: 샷클락 종료 시 부저음
- **쿼터 관리**: 현재 쿼터 표시 (1~4쿼터)

##### 1-3. 3팀 12쿼터 특화 기능
- **쿼터 순서**: A:B → B:C → C:A (자동 순환)
- **점수 이어받기**: 이전 쿼터 최종 점수를 다음 쿼터 시작 점수로 자동 설정
- **쿼터별 기록 저장**: 각 쿼터의 최종 점수 DB 저장
- **경기 요약**: 4쿼터(12경기) 종합 승패 집계

**기술 스택 제안**:
- Frontend: Stimulus.js + Turbo Frames (Rails 기본)
- WebSocket: ActionCable (Rails 내장)
- TTS: Web Speech API (브라우저 내장)
- Audio: HTML5 Audio 태그

**개발 난이도**: ⭐⭐⭐⭐ (바이브 코딩 가능하나 시간 소요)

---

#### 2. 권한 관리 시스템 (Role-Based Access Control) ⭐⭐

##### 2-1. 3단계 권한 구조
```
Admin (서비스 관리자)
  ↓
Club Manager (클럽 운영진)
  ↓
Member (클럽 선수)
```

##### 2-2. 권한별 기능
**Admin**
- 모든 클럽 조회/수정/삭제
- 사용자별 클럽 생성 개수 제한 설정
- 시스템 통계 조회
- 사용자 계정 관리 (정지, 삭제)

**Club Manager** (클럽 생성자)
- 본인 클럽 CRUD
- 멤버 초대 링크 생성
- 경기 생성/수정/삭제
- 팀 밸런싱 실행
- 라이브 점수판 컨트롤

**Member** (초대받은 멤버)
- 소속 클럽 정보 열람 (읽기 전용)
- 본인 통계 조회
- 경기 일정 확인
- MVP 투표 참여

##### 2-3. 초대 시스템
- 클럽별 고유 초대 코드 생성
- 초대 링크를 통한 멤버 가입
- 멤버는 여러 클럭에 소속 가능

**개발 난이도**: ⭐⭐⭐ (Rails의 `pundit` gem 활용)

---

#### 3. 대회 관리 모듈 ⭐ (추후 확장)

##### 3-1. 기본 기능
- 연습 일정 캘린더
- 외부 팀과의 교류전 기록
- 참가 대회 정보 등록 (대회명, 일시, 장소)
- 대회별 전적 집계

##### 3-2. 확장 아이디어 (리서치 필요)
- 토너먼트 대진표 자동 생성
- 대회 MVP 투표
- 대회 하이라이트 영상 링크 관리

**개발 난이도**: ⭐⭐ (기본 CRUD 확장)

---

### Priority 1 (기반 시설 개선)

#### 4. 모바일 반응형 최적화
- 현장에서 스마트폰으로 경기 결과 입력이 가장 빈번할 것
- 드래그앤드롭, 카드 UI가 모바일에서 잘 작동하는지 확인 필요

#### 5. 데이터베이스 업그레이드 (SQLite → PostgreSQL)
- **트리거**: 동시 접속자 10명 이상 시
- **이유**: 라이브 점수판에서 실시간 업데이트 시 SQLite 잠금 이슈 발생 가능
- **마이그레이션**: Render/Heroku의 Managed PostgreSQL 추천

---

### Priority 2 (사용성 개선)

#### 6. 경기 당일 빠른 입력 플로우
- **현재**: 경기 생성 → 팀 구성 → 결과 입력 (3단계)
- **개선**: "오늘 경기" 버튼으로 출석체크 → 자동 팀 배정 → 결과 입력 (원클릭 플로우)

#### 7. 멤버 출석률 통계
- 최근 10경기 출석률, 월별 출석률
- "오늘 참석 가능" 사전 체크 기능 (카카오톡 알림 연동 전 단계)

#### 8. 개인 프로필 페이지
- 멤버별 전체 경기 이력
- 함께 자주 팀을 이룬 멤버 통계
- 승률 추이 그래프

#### 9. 경기 일정 캘린더
- 월별 캘린더 뷰
- 정기 경기일 자동 생성 (예: 매주 토요일 오후 2시)

---

### Priority 3 (재미 요소)

#### 10. MVP/베스트5 투표 기능
- 경기 후 팀원들이 투표 (Member 권한으로 참여)
- 월간 MVP 집계

#### 11. 알림 시스템
- 이메일 또는 카카오톡 알림 (경기 D-1, 팀 배정 완료)
- 현재는 사용자가 직접 접속해야만 정보 확인 가능

#### 12. 다중 클럽 지원 강화
- 현재도 가능하지만, 클럽 간 이동이 번거로울 수 있음
- 대시보드에서 클럽 빠른 전환 메뉴

#### 13. 선수 간 매치업 기록
- A와 B가 같은 팀일 때 vs 다른 팀일 때 승률

---

## ⚠️ 잠재적 리스크

### 기술적 리스크

#### 1. SQLite 동시 접근 제한 🔴 **심각**
- **현재**: 로컬 SQLite 사용
- **문제**: 라이브 점수판 사용 시 실시간 업데이트로 인한 데이터베이스 잠금 발생 가능
- **해결**: 
  - 단기: 사용자 5명 이하면 문제 없음
  - 중기: **라이브 점수판 구현 시 PostgreSQL 필수 전환**
  - Render/Railway의 Managed PostgreSQL 추천 (월 $5~10)

#### 2. 실시간 동기화 복잡도 🟡
- **문제**: 라이브 점수판의 컨트롤 화면 ↔ 디스플레이 화면 동기화
- **고려사항**:
  - 네트워크 지연 시 점수판과 실제 점수 불일치
  - 여러 명이 동시에 점수 입력 시 충돌
- **해결**:
  - ActionCable (WebSocket) 사용
  - "점수 입력 잠금" 기능 (한 명만 컨트롤 가능)
  - 마지막 업데이트 타임스탬프 표시

#### 3. 세션 기반 인증의 한계 🟡
- 서버 재시작 시 로그인 풀릴 수 있음
- 멤버 권한 관리 추가 시 토큰 기반 인증(JWT)으로 업그레이드 고려

#### 4. 백업 자동화 부재 🟡
- **현재**: 수동 JSON 백업
- **리스크**: 데이터 유실 시 복구 불가
- **해결**: 매일 자동 DB 백업 스크립트 필요 (PostgreSQL 전환 시 자동화 쉬움)

---

### 사용성 리스크

#### 5. 팀 밸런싱 알고리즘 불만 🟢
- "최근 5경기 승률" 기준이 사용자 체감과 다를 수 있음
- **해결**: 수동 팀 조정 기능 추가 (현재 자동 배정 후 수정 가능한지 확인 필요)

#### 6. CSV 형식 오류 🟢
- 사용자가 엑셀에서 잘못 저장하면 UTF-8 인코딩 깨짐
- **해결**: 에러 메시지에 "메모장에서 UTF-8로 저장하세요" 가이드 추가

#### 7. 권한 관리 복잡도 🟡
- **문제**: Admin/Manager/Member 3단계 권한 구현 시 버그 발생 가능성
- **해결**:
  - `pundit` gem 사용 (Rails 표준 권한 관리)
  - 각 권한별 테스트 케이스 작성
  - 권한 에러 시 명확한 안내 메시지

---

### 확장성 리스크

#### 8. 호스팅 비용 🟡
- **현재**: 로컬 실행
- **실사용 예상 비용**:
  - Basic (PostgreSQL + 웹서버): 월 $10~15
  - 사용자 100명 이상: 월 $30~50
  - 라이브 점수판 사용 시 트래픽 증가로 비용 상승 가능

#### 9. 대회 관리 모듈 기능 범위 🟢
- 아직 구체적인 요구사항이 불명확
- **권장**: 실사용자 인터뷰 후 MVP 기능만 우선 구현

---

## 🗺️ 개발 로드맵 (6개월)

### Phase 1 (1~2개월): 기반 인프라 & 권한 시스템 🏗️

**목표**: 멀티 사용자 지원 및 배포 준비

- [ ] **PostgreSQL 전환** (SQLite → PostgreSQL)
  - Render/Railway 배포 환경 구축
  - 데이터 마이그레이션 테스트
- [ ] **권한 관리 시스템 구현**
  - Admin/Manager/Member 모델 설계
  - `pundit` gem 설치 및 정책 작성
  - 각 권한별 화면 분기 처리
- [ ] **멤버 초대 시스템**
  - 클럽별 초대 코드 생성
  - 초대 링크 공유 기능
  - 멤버 가입 플로우
- [ ] **자동 백업 스크립트**
  - 매일 자동 DB 백업
  - JSON 백업 파일 클라우드 저장 (S3/Cloudinary)
- [ ] **모바일 UI 개선**
  - 반응형 레이아웃 점검
  - 터치 인터페이스 최적화

**예상 난이도**: ⭐⭐⭐⭐ (바이브 코딩으로 2개월 소요)

---

### Phase 2 (3~4개월): 라이브 점수판 시스템 🎮

**목표**: 핵심 차별화 기능 구현

- [ ] **ActionCable 설정**
  - WebSocket 서버 구성
  - 실시간 동기화 테스트
- [ ] **라이브 점수판 UI**
  - 컨트롤 화면 (PC/태블릿)
    - 1/2/3점 버튼, 타이머 컨트롤
    - 쿼터 전환 버튼
  - 디스플레이 화면 (외부 모니터)
    - 점수판 대형 표시
    - 타이머 애니메이션
- [ ] **농구 경기 로직**
  - 24초 샷클락 (14초 리셋)
  - 쿼터 관리 (1~4쿼터)
  - 음성 안내 (Web Speech API)
  - 부저 사운드 (HTML5 Audio)
- [ ] **3팀 12쿼터 모드**
  - A:B → B:C → C:A 자동 순환
  - 이전 쿼터 점수 이어받기
  - 쿼터별 점수 DB 저장
  - 최종 전적 집계
- [ ] **경기 결과 자동 반영**
  - 라이브 점수판 → 경기 기록 연동
  - 멤버별 승률 자동 업데이트

**예상 난이도**: ⭐⭐⭐⭐⭐ (가장 복잡, 2개월 소요)

**바이브 코딩 팁**:
1. 먼저 정적 점수판 UI만 구현
2. 타이머 로직 추가 (WebSocket 없이)
3. ActionCable 연결 (실시간 동기화)
4. 음성/부저 마지막에 추가

---

### Phase 3 (5개월): 사용성 개선 & 대회 모듈 📊

**목표**: 실사용자 피드백 반영 및 확장 기능

- [ ] **경기 당일 빠른 플로우**
  - "오늘 경기" 원클릭 시작
  - 출석 체크 → 자동 팀 배정 → 라이브 점수판 연동
- [ ] **통계 대시보드 강화**
  - 개인 프로필 페이지
  - 출석률 통계 (최근 10경기, 월별)
  - 승률 추이 그래프
- [ ] **경기 일정 캘린더**
  - 월별 캘린더 뷰
  - 정기 경기 자동 생성 (매주 토요일 등)
- [ ] **대회 관리 모듈 (MVP)**
  - 연습 일정 등록
  - 교류전 결과 기록
  - 참가 대회 정보 입력

**예상 난이도**: ⭐⭐⭐ (1개월 소요)

---

### Phase 4 (6개월): 재미 요소 & 알림 🎉

**목표**: 유저 인게이지먼트 향상

- [ ] **MVP 투표 시스템**
  - 경기 후 멤버 투표
  - 월간 MVP 집계 및 표창
- [ ] **알림 기능**
  - 이메일 알림 (경기 D-1, 팀 배정 완료)
  - 카카오톡 알림 (추후 확장)
- [ ] **클럽 랭킹 보드**
  - 승률 / 출석률 / MVP 횟수 순위
  - 월간 리포트 자동 생성
- [ ] **경기 히스토리 타임라인**
  - 클럽의 전체 경기 이력 시각화
- [ ] **다중 클럽 빠른 전환**
  - 상단 메뉴에서 클럽 드롭다운 선택

**예상 난이도**: ⭐⭐ (1개월 소요)

---

## 📅 마일스톤 요약

| 기간 | 핵심 목표 | 완성도 |
|------|----------|--------|
| 1~2개월 | 권한 시스템 + PostgreSQL 전환 + 배포 | 30% |
| 3~4개월 | 라이브 점수판 시스템 완성 | 70% |
| 5개월 | 통계/일정/대회 관리 | 85% |
| 6개월 | MVP 투표/알림/랭킹 | 100% |

---

## 🚀 바로 시작할 수 있는 것

다음 중 하나를 먼저 시작하는 것을 추천합니다:

1. **PostgreSQL 전환** (필수, 라이브 점수판 전에 완료)
2. **권한 시스템 설계** (DB 스키마부터 시작)
3. **라이브 점수판 프로토타입** (정적 UI만 먼저 만들기)

어떤 것부터 시작하고 싶으신가요?

---

## 💡 바이브 코딩 팁

### 1. 한 번에 하나씩
- 기능 하나 완성 → 테스트 → 다음 기능
- 여러 개 동시 작업 시 디버깅 지옥
- **특히 라이브 점수판은 단계별로 쪼개서 진행**:
  1. 정적 UI → 2. 타이머 → 3. 실시간 동기화 → 4. 음성/부저

### 2. 에러 메시지 꼭 복사해서 질문
- Claude에게 전체 에러 로그 붙여넣기
- "incompatible encoding", "ActionCable connection failed" 같은 키워드 포함
- 브라우저 콘솔 에러도 함께 공유

### 3. Git 커밋 자주하기
- 새 기능 작업 전 커밋
- 망가지면 이전 버전으로 롤백
- **권한 시스템 구현 시 특히 중요** (잘못하면 모든 화면 접근 불가)

### 4. 실사용자 베타 테스트
- 동호회 멤버 2~3명에게 먼저 사용시켜보기
- 예상 못한 사용 패턴 발견 가능
- **라이브 점수판은 실제 경기에서 테스트 필수**

### 5. 라이브 점수판 개발 시 주의사항
- **듀얼 스크린 테스트**: 노트북 + 외부 모니터 연결해서 테스트
- **WebSocket 연결 끊김 처리**: 네트워크 불안정 시 자동 재연결
- **음성 안내 볼륨 조절**: 체육관에서는 소리가 잘 안 들릴 수 있음
- **모바일로도 컨트롤 가능하게**: 태블릿으로 점수 입력하는 경우 많음

### 6. 권한 관리 개발 시 주의사항
- **Admin 계정 미리 생성**: 권한 시스템 구현 후 로그인 못하는 사고 방지
- **테스트 계정 3개 생성**: Admin / Manager / Member 각각 테스트
- **권한 에러 시 명확한 메시지**: "접근 권한이 없습니다" (어떤 권한이 필요한지 명시)

### 7. PostgreSQL 전환 시 주의사항
- **로컬에서 먼저 테스트**: SQLite → PostgreSQL 마이그레이션 연습
- **기존 데이터 백업**: JSON 내보내기로 전체 데이터 백업 후 진행
- **schema.rb 확인**: 마이그레이션 후 DB 스키마 제대로 생성되었는지 확인

### 8. 배포 체크리스트
- [ ] 환경 변수 설정 (SECRET_KEY_BASE, DATABASE_URL)
- [ ] PostgreSQL 데이터베이스 생성
- [ ] 마이그레이션 실행 (`rails db:migrate`)
- [ ] Admin 계정 생성 (`rails admin:grant[email]`)
- [ ] SSL 인증서 설정 (HTTPS 필수, WebSocket 동작 위해)
- [ ] 도메인 연결 (선택 사항)

---

## 📝 다음 스텝

### 즉시 결정해야 할 사항

1. **개발 순서 결정**
   - Option A: 권한 시스템 먼저 → 라이브 점수판
   - Option B: 라이브 점수판 프로토타입 먼저 → 권한 시스템
   - **추천**: Option A (멀티 유저 지원 후 라이브 기능 추가가 안전)

2. **데이터베이스 전환 시점**
   - 지금 바로 PostgreSQL 전환? (추천)
   - 라이브 점수판 구현 직전?

3. **대회 관리 모듈 범위**
   - MVP 기능만? (연습 일정 + 교류전 기록)
   - 토너먼트 대진표까지?
   - **추천**: 실사용자 인터뷰 후 결정

### 제거 고려 기능 (추후 논의)

다음 기능들은 현재 로드맵에서 우선순위가 낮거나 나중에 판단하기로 한 항목입니다:
- ~~선수 간 매치업 기록~~ (통계 복잡도 높음, 나중에 추가)
- ~~카카오톡 알림~~ (이메일 알림 먼저 구현 후 검토)

---

## 🎯 성공 지표

서비스가 잘 운영되고 있는지 확인하는 지표:

- 📊 **활성 클럽 수**: 월 10개 이상
- 👥 **월간 활성 사용자**: 50명 이상
- 🏀 **월간 경기 수**: 100경기 이상
- ⚡ **라이브 점수판 사용률**: 전체 경기의 30% 이상
- 💬 **사용자 피드백**: 월 5건 이상의 개선 제안

---

## 📚 참고 자료

### 기술 스택 학습 자료
- **Rails Guides**: https://guides.rubyonrails.org/
- **ActionCable 튜토리얼**: https://guides.rubyonrails.org/action_cable_overview.html
- **Pundit (권한 관리)**: https://github.com/varvet/pundit
- **Stimulus.js (프론트엔드)**: https://stimulus.hotwired.dev/

### 배포 가이드
- **Render 배포**: https://render.com/docs/deploy-rails
- **Railway 배포**: https://docs.railway.app/guides/rails
- **PostgreSQL 마이그레이션**: https://guides.rubyonrails.org/v3.2/migrations.html

---

## 💬 프로젝트 문의

기능 추가, 버그 수정, 배포 관련 질문은 언제든지 환영합니다!

**다음에 논의할 주제**:
- 라이브 점수판 UI 디자인 컨셉
- 권한 관리 DB 스키마 설계
- PostgreSQL 전환 마이그레이션 플랜
- 대회 관리 모듈 상세 요구사항

**바이브 코딩으로 6개월 안에 완성 가능합니다! 화이팅! 🏀🔥**
